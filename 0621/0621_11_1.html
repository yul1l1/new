<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>날씨앱</title>
  </head>
  <body>
    <script> // json 형식으로 값넘기기 
      async function getGeo(city, limit, key, geoUrl) {
        const result = await $.ajax({
          url: geoUrl,
          data: { q: city, limit: limit, appid: key },
          method: "get",
          processData: true,
        });
        return {위도: result[0].lat, 경도:result[0].lon}
      }
      $(document).ready(async function () {
        const key = "5a901afa3c43247852d1979f388b32d7";
        const geoUrl = `https://api.openweathermap.org/geo/1.0/direct`;
        const airUrl = `https://api.openweathermap.org/data/2.5/air_pollution`;
        const weatherUrl = `https://api.openweathermap.org/data/2.5/onecall`;
        const city = "Incheon";
        const limit = 1;
        const position = await getGeo(city, limit,"5a901afa3c43247852d1979f388b32d7", geoUrl); 
        // await 를 쓰지않으면 promise라고 제대로 작동이 안된다
         //연결된 함수와 이름은 달라도 되지만 배열 순서는 같아야 한다
         console.log(position)
        // airUrl, weatherUrl에 대한 ajax 요청을 보내자 
        
      });
    </script>
  </body>
</html>
